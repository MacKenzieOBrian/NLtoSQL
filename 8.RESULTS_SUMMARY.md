# Results Summary

## Snapshot (Decision‑Stage View)
1) **Prompt‑only baseline** → VA improves, EX remains low.
2) **QLoRA adapters** → EX improves notably (especially k=3).
3) **Execution‑guided agent** → VA/robustness improves; EX gains limited by semantic priors.

---

## Metrics
Primary: VA / EX.  
Secondary: EM (diagnostic), TS (suite‑based semantic check).

---

## 2026‑01‑30 Stage‑3 Full Run (200 queries)
**Results:** VA **0.805**, EX **0.13**, EM **0.105** (`results_react_200`).  
**Reading:** VA confirms strong syntactic control; EX indicates semantic bottlenecks (joins, aggregation scope, projection granularity). EM is expectedly low under agentic rewrites and post‑processing.
**Dissertation framing:** this is the first full‑set agentic result showing the **VA≠EX gap** explicitly. It anchors the claim that execution guidance stabilises SQL validity but does not, by itself, close semantic correctness gaps.
**Implication:** TS is now implemented as a suite‑based semantic check; next milestone is to **distill/perturb DBs** so TS more closely matches Zhong et al. test suites.

---

## Baselines
**Zero‑shot (k=0):** schema in prompt, deterministic decoding.  
VA ~0.80–0.82; EX ~0.00; EM ~0.00.  
**Takeaway:** syntax without semantics.

**Few‑shot (k=3):** same model, +3 exemplars.  
VA ~0.86; EX ~0.25; EM low.  
**Takeaway:** exemplars stabilize schema grounding but not complex reasoning.

---

## QLoRA Fine‑Tuning
Model: Llama‑3‑8B‑Instruct | QLoRA 4‑bit, r=32, ~3 epochs.

**Results (example run):**
- **k=0:** VA 0.865 / EX 0.065 / EM 0.000
- **k=3:** VA 0.870 / EX 0.380 / EM 0.310

**Takeaway:** QLoRA + exemplars outperforms prompt‑only few‑shot; adapter‑only (k=0) still weak.

---

## Agentic (ReAct‑Inspired) Runs — Current Status
**Loop:** multi‑candidate generation + cleaning + clamps + execution gating + semantic rerank + repair + fallback.  
**Outcome:** VA improved; EX remains bounded by semantic priors on joins/aggregates.  
**Failure modes:** wrong join paths, aggregation drift, semantic mismatches that still execute (VA=1, EX=0).  
**Positioning:** present as execution‑guided reranking rather than full ReAct.

---

## Failure‑Mode Summary (for Discussion)
- **Wrong join path** (schema linking failure)
- **Wrong aggregation** (COUNT vs SUM, missing GROUP BY)
- **Extra columns / ORDER BY** (EM regressions)
- **Valid‑but‑irrelevant SQL** (VA=1, EX=0)

---

## Next Steps (if time permits)
- Strengthen TS by **distilling/perturbing** the DBs (beyond clones)
- Stronger critic/reranker for semantics
- Expanded adapter training with compositional templates

---

## Traceable Runs (Logbook Anchors)
- 2025‑12‑14: baseline hygiene (see LOGBOOK)
- 2026‑01‑12: QLoRA run (see LOGBOOK)
- 2026‑01‑24–29: ReAct staging and trace logging (see LOGBOOK)
